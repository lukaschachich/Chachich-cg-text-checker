# Amazon Review Analyzer

A Streamlit web app that predicts whether an input sentence/review was written by a Human or generated by AI. It reproduces the feature extraction used during training (text stats, sentiment, and POS features) to ensure the model receives the exact same inputs at inference time.

## What It Does
- Takes review text input and an optional product category + rating.
- Extracts features matching your training pipeline (length, word count, punctuation, average word length, uppercase ratio, POS counts, sentiment).
- Loads a saved XGBoost classifier and returns:
  - Label: `Human` or `AI`
  - Confidence score and class probabilities
- Shows a feature analysis panel to explain what the model "sees".

## Repo Structure
Key files and folders:
- `webapp/app.py`: Streamlit app UI + inference functions
- `src/`: Preprocessing and feature extraction utilities
- `model/`: Expected location for model artifacts
  - `feature_names.json`: Names and order of expected features
  - `model_metadata.json`: Model info
  - `review_classifier.pkl`: Trained XGBoost model (you need to add this)
- `requirements.txt`: Python dependencies
- `train_model.py`, `tune_model.py`: Training scripts (if you need to train a model)

## Prerequisites
- Python 3.10+ is recommended
- Windows PowerShell (commands below are PowerShell-friendly)

## Setup
1. Create and activate a virtual environment (skip if you already have one):

```powershell
python -m venv venv
& "$(Resolve-Path .\venv\Scripts\Activate.ps1)"
```

2. Install dependencies:

```powershell
pip install -r requirements.txt
```

3. Download the spaCy English model (required by the app):

```powershell
python -m spacy download en_core_web_sm
```

Note: The app will auto-download the NLTK VADER lexicon if missing.

## Model Files
The app expects the trained model at:

```
model/review_classifier.pkl
```

- If you have trained a model elsewhere, place the `.pkl` file here.
- Ensure `feature_names.json` exists in `model/` and matches the features your model expects.
- If your model lives in a different folder, update the path in `webapp/app.py` inside `get_xgb_model()` accordingly.

Current code expects:

```python
model_dir = Path(__file__).resolve().parents[1] / "model"
model_path = model_dir / "review_classifier.pkl"
```

## Running the App
From the repository root:

```powershell
& "$(Resolve-Path .\venv\Scripts\Activate.ps1)"
streamlit run webapp/app.py
```

Then open the UI in your browser (Streamlit will print the local URL).

## Using the App
- Enter or paste review text in the left column.
- Select a product category (mapped via `webapp/utils/constants.py`).
- Optionally set a rating (1â€“5) to match any training features that used it.
- Click "Analyze Review" to get the prediction and confidence.
- Expand "Feature Analysis" to inspect extracted features.

## Troubleshooting
- "Model file not found":
  - Verify `model/review_classifier.pkl` exists.
  - Confirm the path in `get_xgb_model()` matches your layout.
- spaCy errors about missing model:
  - Run `python -m spacy download en_core_web_sm` again.
- Import errors for `preprocess_text`:
  - Ensure `src/` is present; the app appends it to `sys.path`.
- Feature shape mismatch:
  - Make sure `feature_names.json` matches the training pipeline; the app aligns columns in `prepare_features_for_prediction()`.

## Training (Optional)
If you need to train or tune the model:
- Explore `train_model.py` and `tune_model.py`.
- Save the trained classifier to `model/review_classifier.pkl` and export the feature names into `model/feature_names.json` to ensure prediction alignment.

## License
This project is for educational use. Adjust and extend as needed for your workflow.
